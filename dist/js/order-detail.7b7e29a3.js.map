{"version":3,"sources":["webpack:///./src/views/OrderDetail.vue?312c","webpack:///./src/components/SimpleHeader.vue","webpack:///./src/components/SimpleHeader.vue?aeba","webpack:///./src/components/SimpleHeader.vue?b187","webpack:///./src/service/order.js","webpack:///./src/views/OrderDetail.vue","webpack:///./src/views/OrderDetail.vue?1dad"],"names":["class","isback","goBack","name","props","type","String","default","back","noback","Boolean","emits","setup","ctx","router","push","path","go","emit","render","__scopeId","createOrder","params","axios","post","getOrderList","get","getOrderDetail","id","cancelOrder","put","confirmOrder","payOrder","style","close","detail","orderStatusString","orderNo","createTime","orderStatus","color","block","showPayFn","handleCancelOrder","totalPrice","newBeeMallOrderItemVOS","item","key","goodsId","num","goodsCount","price","sellingPrice","desc","title","goodsName","thumb","$filters","prefix","goodsCoverImg","show","showPay","position","handlePayOrder","components","sHeader","route","state","init","loading","message","forbidClick","query","data","clear","confirm","then","res","resultCode","catch","handleConfirmOrder","payType"],"mappings":"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","file":"js/order-detail.7b7e29a3.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./OrderDetail.vue?vue&type=style&index=0&id=77463bf8&lang=less&scoped=true\"","<template>\r\n  <header class=\"simple-header van-hairline--bottom\">\r\n    <i v-if=\"!isback\" class=\"nbicon nbfanhui\" @click=\"goBack\"></i>\r\n    <i v-else>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</i>\r\n    <div class=\"simple-header-name\">{{ name }}</div>\r\n    <i class=\"nbicon nbmore\"></i>\r\n  </header>\r\n  <div class=\"block\" />\r\n</template>\r\n\r\n<script>\r\nimport { ref } from 'vue'\r\nimport { useRouter } from 'vue-router'\r\nexport default {\r\n  props: {\r\n    name: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    back: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    noback: {\r\n      type: Boolean,\r\n      default: false\r\n    }\r\n  },\r\n  emits: ['callback'],\r\n  setup(props, ctx) {\r\n    const isback = ref(props.noback)\r\n    const router = useRouter()\r\n    const goBack = () => {\r\n      if (!props.back) {\r\n        router.go(-1)\r\n      } else {\r\n        router.push({ path: props.back })\r\n      }\r\n      ctx.emit('callback')\r\n    }\r\n    return {\r\n      goBack,\r\n      isback\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n  @import '../common/style/mixin';\r\n  .simple-header {\r\n    position: fixed;\r\n    top: 0;\r\n    left: 0;\r\n    z-index: 10000;\r\n    .fj();\r\n    .wh(100%, 44px);\r\n    line-height: 44px;\r\n    padding: 0 10px;\r\n    .boxSizing();\r\n    color: #252525;\r\n    background: #fff;\r\n    .simple-header-name {\r\n      font-size: 14px;\r\n    }\r\n  }\r\n  .block {\r\n    height: 44px;\r\n  }\r\n</style>\r\n","import { render } from \"./SimpleHeader.vue?vue&type=template&id=97148694&scoped=true\"\nimport script from \"./SimpleHeader.vue?vue&type=script&lang=js\"\nexport * from \"./SimpleHeader.vue?vue&type=script&lang=js\"\n\nimport \"./SimpleHeader.vue?vue&type=style&index=0&id=97148694&lang=less&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-97148694\"\n\nexport default script","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./SimpleHeader.vue?vue&type=style&index=0&id=97148694&lang=less&scoped=true\"","import axios from '../utils/axios'\r\n\r\nexport function createOrder(params) {\r\n  return axios.post('/saveOrder', params);\r\n}\r\n\r\nexport function getOrderList(params) {\r\n  return axios.get('/order', { params });\r\n}\r\n\r\nexport function getOrderDetail(id) {\r\n  return axios.get(`/order/${id}`);\r\n}\r\n\r\nexport function cancelOrder(id) {\r\n  return axios.put(`/order/${id}/cancel`);\r\n}\r\n\r\nexport function confirmOrder(id) {\r\n  return axios.put(`/order/${id}/finish`)\r\n}\r\n\r\nexport function payOrder(params) {\r\n  return axios.get('/paySuccess', { params })\r\n}\r\n\r\n\r\n\r\n\r\n","<template>\r\n  <div class=\"order-detail-box\">\r\n    <s-header :name=\"'订单详情'\" @callback=\"close\"></s-header>\r\n    <div class=\"order-status\">\r\n      <div class=\"status-item\">\r\n        <label>订单状态：</label>\r\n        <span>{{ detail.orderStatusString }}</span>\r\n      </div>\r\n      <div class=\"status-item\">\r\n        <label>订单编号：</label>\r\n        <span>{{ detail.orderNo }}</span>\r\n      </div>\r\n      <div class=\"status-item\">\r\n        <label>下单时间：</label>\r\n        <span>{{ detail.createTime }}</span>\r\n      </div>\r\n      <!-- <van-button v-if=\"[1,2,3].includes(detail.orderStatus)\" style=\"margin-bottom: 10px\" color=\"#1baeae\" block @click=\"confirmOrder(detail.orderNo)\">确认订单</van-button> -->\r\n      <van-button v-if=\"detail.orderStatus == 0\" style=\"margin-bottom: 10px\" color=\"#1baeae\" block @click=\"showPayFn\">去支付</van-button>\r\n      <van-button v-if=\"!(detail.orderStatus < 0 || detail.orderStatus == 4)\" block @click=\"handleCancelOrder(detail.orderNo)\">取消订单</van-button>\r\n    </div>\r\n    <div class=\"order-price\">\r\n      <div class=\"price-item\">\r\n        <label>商品金额：</label>\r\n        <span>¥ {{ detail.totalPrice }}</span>\r\n      </div>\r\n      <div class=\"price-item\">\r\n        <label>配送方式：</label>\r\n        <span>普通快递</span>\r\n      </div>\r\n    </div>\r\n    <van-card\r\n      v-for=\"item in detail.newBeeMallOrderItemVOS\"\r\n      :key=\"item.goodsId\"\r\n      style=\"background: #fff\"\r\n      :num=\"item.goodsCount\"\r\n      :price=\"item.sellingPrice\"\r\n      desc=\"全场包邮\"\r\n      :title=\"item.goodsName\"\r\n      :thumb=\"$filters.prefix(item.goodsCoverImg)\"\r\n    />\r\n    <van-popup\r\n      v-model:show=\"showPay\"\r\n      position=\"bottom\"\r\n      :style=\"{ height: '24%' }\"\r\n    >\r\n      <div :style=\"{ width: '90%', margin: '0 auto', padding: '20px 0' }\">\r\n        <van-button :style=\"{ marginBottom: '10px' }\" color=\"#1989fa\" block @click=\"handlePayOrder(detail.orderNo, 1)\">支付宝支付</van-button>\r\n        <van-button color=\"#4fc08d\" block @click=\"handlePayOrder(detail.orderNo, 2)\">微信支付</van-button>\r\n      </div>\r\n    </van-popup>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { reactive, toRefs, onMounted } from 'vue'\r\nimport sHeader from '@/components/SimpleHeader'\r\nimport { getOrderDetail, cancelOrder, confirmOrder, payOrder } from '@/service/order'\r\nimport { Dialog, Toast } from 'vant'\r\nimport { useRoute } from 'vue-router'\r\nexport default {\r\n  name: 'OrderDetail',\r\n  components: {\r\n    sHeader\r\n  },\r\n  setup() {\r\n    const route = useRoute()\r\n    const state = reactive({\r\n      detail: {},\r\n      showPay: false\r\n    })\r\n\r\n    onMounted(() => {\r\n      init()\r\n    })\r\n\r\n    const init = async () => {\r\n      Toast.loading({\r\n        message: '加载中...',\r\n        forbidClick: true\r\n      });\r\n      const { id } = route.query\r\n      const { data } = await getOrderDetail(id)\r\n      state.detail = data\r\n      Toast.clear()\r\n    }\r\n\r\n    const handleCancelOrder = (id) => {\r\n      Dialog.confirm({\r\n        title: '确认取消订单？',\r\n      }).then(() => {\r\n        cancelOrder(id).then(res => {\r\n          if (res.resultCode == 200) {\r\n            Toast('删除成功')\r\n            init()\r\n          }\r\n        })\r\n      }).catch(() => {\r\n        // on cancel\r\n      });\r\n    }\r\n\r\n    const handleConfirmOrder = (id) => {\r\n      Dialog.confirm({\r\n        title: '是否确认订单？',\r\n      }).then(() => {\r\n        confirmOrder(id).then(res => {\r\n          if (res.resultCode == 200) {\r\n            Toast('确认成功')\r\n            init()\r\n          }\r\n        })\r\n      }).catch(() => {\r\n        // on cancel\r\n      });\r\n    }\r\n\r\n    const showPayFn = () => {\r\n      state.showPay = true\r\n    }\r\n\r\n    const handlePayOrder = async (id, type) => {\r\n      Toast.loading\r\n      await payOrder({ orderNo: id, payType: type })\r\n      state.showPay = false\r\n      init()\r\n    }\r\n\r\n    const close = () => {\r\n      Dialog.close()\r\n    }\r\n\r\n    return {\r\n      ...toRefs(state),\r\n      handleCancelOrder,\r\n      handleConfirmOrder,\r\n      showPayFn,\r\n      handlePayOrder,\r\n      close\r\n    }\r\n\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n  .order-detail-box {\r\n    background: #f7f7f7;\r\n    .order-status {\r\n      background: #fff;\r\n      padding: 20px;\r\n      font-size: 15px;\r\n      .status-item {\r\n        margin-bottom: 10px;\r\n        label {\r\n          color: #999;\r\n        }\r\n        span {\r\n\r\n        }\r\n      }\r\n    }\r\n    .order-price {\r\n      background: #fff;\r\n      margin: 20px 0;\r\n      padding: 20px;\r\n      font-size: 15px;\r\n      .price-item {\r\n        margin-bottom: 10px;\r\n        label {\r\n          color: #999;\r\n        }\r\n        span {\r\n\r\n        }\r\n      }\r\n    }\r\n    .van-card {\r\n      margin-top: 0;\r\n    }\r\n    .van-card__content {\r\n      display: flex;\r\n      flex-direction: column;\r\n      justify-content: center;\r\n    }\r\n  }\r\n</style>\r\n","import { render } from \"./OrderDetail.vue?vue&type=template&id=77463bf8&scoped=true\"\nimport script from \"./OrderDetail.vue?vue&type=script&lang=js\"\nexport * from \"./OrderDetail.vue?vue&type=script&lang=js\"\n\nimport \"./OrderDetail.vue?vue&type=style&index=0&id=77463bf8&lang=less&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-77463bf8\"\n\nexport default script"],"sourceRoot":""}