{"version":3,"sources":["webpack:///./src/components/SimpleHeader.vue","webpack:///./src/components/SimpleHeader.vue?aeba","webpack:///./src/components/SimpleHeader.vue?b187","webpack:///./src/service/good.js","webpack:///./src/views/ProductDetail.vue","webpack:///./src/views/ProductDetail.vue?9de9","webpack:///./src/views/ProductDetail.vue?67e3","webpack:///./node_modules/core-js/modules/es.array.map.js"],"names":["class","isback","goBack","name","props","type","String","default","back","noback","Boolean","emits","setup","ctx","router","push","path","go","emit","render","__scopeId","getDetail","id","axios","get","getCategory","search","params","indicator-color","detail","goodsCarouselList","item","index","key","src","alt","goodsName","sellingPrice","goodsDetailContent","icon","text","badge","count","goTo","handleAddCart","goToCart","route","store","state","data","map","i","dispatch","content","document","querySelector","scrollTop","goodsCount","goodsId","resultCode","success","console","log","cartCount","components","sHeader","$","$map","arrayMethodHasSpeciesSupport","arrayMethodUsesToLength","HAS_SPECIES_SUPPORT","USES_TO_LENGTH","target","proto","forced","callbackfn","this","arguments","length","undefined"],"mappings":"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","file":"js/product.9389865b.js","sourcesContent":["<template>\r\n  <header class=\"simple-header van-hairline--bottom\">\r\n    <i v-if=\"!isback\" class=\"nbicon nbfanhui\" @click=\"goBack\"></i>\r\n    <i v-else>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</i>\r\n    <div class=\"simple-header-name\">{{ name }}</div>\r\n    <i class=\"nbicon nbmore\"></i>\r\n  </header>\r\n  <div class=\"block\" />\r\n</template>\r\n\r\n<script>\r\nimport { ref } from 'vue'\r\nimport { useRouter } from 'vue-router'\r\nexport default {\r\n  props: {\r\n    name: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    back: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    noback: {\r\n      type: Boolean,\r\n      default: false\r\n    }\r\n  },\r\n  emits: ['callback'],\r\n  setup(props, ctx) {\r\n    const isback = ref(props.noback)\r\n    const router = useRouter()\r\n    const goBack = () => {\r\n      if (!props.back) {\r\n        router.go(-1)\r\n      } else {\r\n        router.push({ path: props.back })\r\n      }\r\n      ctx.emit('callback')\r\n    }\r\n    return {\r\n      goBack,\r\n      isback\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n  @import '../common/style/mixin';\r\n  .simple-header {\r\n    position: fixed;\r\n    top: 0;\r\n    left: 0;\r\n    z-index: 10000;\r\n    .fj();\r\n    .wh(100%, 44px);\r\n    line-height: 44px;\r\n    padding: 0 10px;\r\n    .boxSizing();\r\n    color: #252525;\r\n    background: #fff;\r\n    .simple-header-name {\r\n      font-size: 14px;\r\n    }\r\n  }\r\n  .block {\r\n    height: 44px;\r\n  }\r\n</style>\r\n","import { render } from \"./SimpleHeader.vue?vue&type=template&id=97148694&scoped=true\"\nimport script from \"./SimpleHeader.vue?vue&type=script&lang=js\"\nexport * from \"./SimpleHeader.vue?vue&type=script&lang=js\"\n\nimport \"./SimpleHeader.vue?vue&type=style&index=0&id=97148694&lang=less&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-97148694\"\n\nexport default script","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./SimpleHeader.vue?vue&type=style&index=0&id=97148694&lang=less&scoped=true\"","import axios from '../utils/axios'\r\n\r\nexport function getDetail(id) {\r\n  return axios.get(`/goods/detail/${id}`);\r\n}\r\n\r\nexport function getCategory() {\r\n  return axios.get('/categories');\r\n}\r\n\r\nexport function search(params) {\r\n  return axios.get('/search', { params });\r\n}\r\n\r\n","\r\n<template>\r\n  <div class=\"product-detail\">\r\n    <s-header :name=\"'商品详情'\"></s-header>\r\n    <div class=\"detail-content\">\r\n      <div class=\"detail-swipe-wrap\">\r\n        <van-swipe class=\"my-swipe\" indicator-color=\"#1baeae\">\r\n          <van-swipe-item v-for=\"(item, index) in detail.goodsCarouselList\" :key=\"index\">\r\n            <img :src=\"item\" alt=\"\">\r\n          </van-swipe-item>\r\n        </van-swipe>\r\n      </div>\r\n      <div class=\"product-info\">\r\n        <div class=\"product-title\">\r\n          {{ detail.goodsName || '' }}\r\n        </div>\r\n        <div class=\"product-desc\">免邮费 顺丰快递</div>\r\n        <div class=\"product-price\">\r\n          <span>¥{{ detail.sellingPrice || '' }}</span>\r\n          <!-- <span>库存203</span> -->\r\n        </div>\r\n      </div>\r\n      <div class=\"product-intro\">\r\n        <ul>\r\n          <li>概述</li>\r\n          <li>参数</li>\r\n          <li>安装服务</li>\r\n          <li>常见问题</li>\r\n        </ul>\r\n        <div class=\"product-content\" v-html=\"detail.goodsDetailContent || ''\"></div>\r\n      </div>\r\n    </div>\r\n    <van-action-bar>\r\n      <van-action-bar-icon icon=\"chat-o\" text=\"客服\" />\r\n      <van-action-bar-icon icon=\"cart-o\" :badge=\"!count ? '' : count\" @click=\"goTo()\" text=\"购物车\" />\r\n      <van-action-bar-button type=\"warning\" @click=\"handleAddCart\" text=\"加入购物车\" />\r\n      <van-action-bar-button type=\"danger\" @click=\"goToCart\" text=\"立即购买\" />\r\n    </van-action-bar>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { reactive, onMounted, computed, toRefs, nextTick } from 'vue'\r\nimport { useRoute, useRouter } from 'vue-router'\r\nimport { useStore } from 'vuex'\r\nimport { getDetail } from '@/service/good'\r\nimport { addCart } from '@/service/cart'\r\nimport sHeader from '@/components/SimpleHeader'\r\nimport { Toast } from 'vant'\r\nimport { prefix } from '@/common/js/utils'\r\nexport default {\r\n  setup() {\r\n    const route = useRoute()\r\n    const router = useRouter()\r\n    const store = useStore()\r\n\r\n    const state = reactive({\r\n      detail: {\r\n        goodsCarouselList: []\r\n      }\r\n    })\r\n\r\n    onMounted(async () => {\r\n      const { id } = route.params\r\n      const { data } = await getDetail(id)\r\n      data.goodsCarouselList = data.goodsCarouselList.map(i => prefix(i))\r\n      state.detail = data\r\n      store.dispatch('updateCart')\r\n    })\r\n\r\n    nextTick(() => {\r\n      // 一些和DOM有关的东西\r\n      const content = document.querySelector('.detail-content')\r\n      content.scrollTop = 0\r\n    })\r\n\r\n    const goBack = () => {\r\n      router.go(-1)\r\n    }\r\n\r\n    const goTo = () => {\r\n      router.push({ path: '/cart' })\r\n    }\r\n\r\n    const handleAddCart = async () => {\r\n      const { resultCode } = await addCart({ goodsCount: 1, goodsId: state.detail.goodsId })\r\n      if (resultCode == 200 ) Toast.success('添加成功')\r\n      store.dispatch('updateCart')\r\n    }\r\n\r\n    const goToCart = async () => {\r\n      await addCart({ goodsCount: 1, goodsId: state.detail.goodsId })\r\n      store.dispatch('updateCart')\r\n      router.push({ path: '/cart' })\r\n    }\r\n\r\n    const count = computed(() => {\r\n      console.log(111, store.state.cartCount)\r\n      return store.state.cartCount\r\n    })\r\n\r\n    return {\r\n      ...toRefs(state),\r\n      goBack,\r\n      goTo,\r\n      handleAddCart,\r\n      goToCart,\r\n      count\r\n    }\r\n  },\r\n  components: {\r\n    sHeader\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\">\r\n  @import '../common/style/mixin';\r\n  .product-detail {\r\n    .detail-header {\r\n      position: fixed;\r\n      top: 0;\r\n      left: 0;\r\n      z-index: 10000;\r\n      .fj();\r\n      .wh(100%, 44px);\r\n      line-height: 44px;\r\n      padding: 0 10px;\r\n      .boxSizing();\r\n      color: #252525;\r\n      background: #fff;\r\n      border-bottom: 1px solid #dcdcdc;\r\n      .product-name {\r\n        font-size: 14px;\r\n      }\r\n    }\r\n    .detail-content {\r\n      height: calc(100vh - 50px);\r\n      overflow: hidden;\r\n      overflow-y: auto;\r\n      .detail-swipe-wrap {\r\n        .my-swipe .van-swipe-item {\r\n          img {\r\n            width: 100%;\r\n            // height: 300px;\r\n          }\r\n        }\r\n      }\r\n      .product-info {\r\n        padding: 0 10px;\r\n        .product-title {\r\n          font-size: 18px;\r\n          text-align: left;\r\n          color: #333;\r\n        }\r\n        .product-desc {\r\n          font-size: 14px;\r\n          text-align: left;\r\n          color: #999;\r\n          padding: 5px 0;\r\n        }\r\n        .product-price {\r\n          .fj();\r\n          span:nth-child(1) {\r\n            color: #F63515;\r\n            font-size: 22px;\r\n          }\r\n          span:nth-child(2) {\r\n            color: #999;\r\n            font-size: 16px;\r\n          }\r\n        }\r\n      }\r\n      .product-intro {\r\n        width: 100%;\r\n        padding-bottom: 50px;\r\n        ul {\r\n          .fj();\r\n          width: 100%;\r\n          margin: 10px 0;\r\n          li {\r\n            flex: 1;\r\n            padding: 5px 0;\r\n            text-align: center;\r\n            font-size: 15px;\r\n            border-right: 1px solid #999;\r\n            box-sizing: border-box;\r\n            &:last-child {\r\n              border-right: none;\r\n            }\r\n          }\r\n        }\r\n        .product-content {\r\n          padding: 0 20px;\r\n          img {\r\n            width: 100%;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    .van-action-bar-button--warning {\r\n      background: linear-gradient(90deg,#fdcf00, #fd9b00)\r\n    }\r\n    .van-action-bar-button--danger {\r\n      background: linear-gradient(90deg,#ff7310,#fe3f00)\r\n    }\r\n  }\r\n</style>\r\n","import { render } from \"./ProductDetail.vue?vue&type=template&id=c54a98cc\"\nimport script from \"./ProductDetail.vue?vue&type=script&lang=js\"\nexport * from \"./ProductDetail.vue?vue&type=script&lang=js\"\n\nimport \"./ProductDetail.vue?vue&type=style&index=0&id=c54a98cc&lang=less\"\nscript.render = render\n\nexport default script","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ProductDetail.vue?vue&type=style&index=0&id=c54a98cc&lang=less\"","'use strict';\nvar $ = require('../internals/export');\nvar $map = require('../internals/array-iteration').map;\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('map');\n// FF49- issue\nvar USES_TO_LENGTH = arrayMethodUsesToLength('map');\n\n// `Array.prototype.map` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.map\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT || !USES_TO_LENGTH }, {\n  map: function map(callbackfn /* , thisArg */) {\n    return $map(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n"],"sourceRoot":""}